=======
fhiclpy
=======

*fhiclpy* is the Python binding for FHiCL, the Fermilab Hierarchical
 Configuration Language.

FHiCL:   https://cdcvs.fnal.gov/redmine/projects/fhicl
fhiclpy: https://cdcvs.fnal.gov/redmine/projects/fhicl-py

Installation
------------

Install the pyparsing package if necessary.  The commands
 $ cd <fhicl-py directory containing this README file>
 $ easy_install pyparsing-1.5.6-py2.4.egg
will do the job.  

You are ready to try the examples below.

Usage
-----

The file fhiclpy.py contains the Python implementation of FHiCL
parser, and a simple main program to exercise the parser. The
important function is 'parse'.

Normal use of fhiclpy.py is to import the 'parse' function from the
module:

  from fhiclpy import parse
  # now the function parse is available for use...

This function parses a string. If the string is legal FHiCL, it returns
a dictionary containing the parsed parameters. If the string is not
legal FHiCL, it raises an exception.

Examples
--------

# empty document (very exciting)
>>> parse("")
{}

# one parameter
>>> parse("a: 1")
{'a': 1}

# a nested fhicl table (returned as a dictionary in python land)
>>> parse("a: { b: cow } b: 2}")
{'a': {'b': 'cow'}, 'b': 2}

# read a whole file
>>> parse(open("testFiles/pass/hname_pro_pass.fcl").read())
{'a': 1}

>>> parse("not legal")
INVALID_TOKEN: ('Invalid token detected! Invalid Token @  legal')


If run as a program, fhiclpy.py parses standard input. If the input is
legal FHiCL, the resulting dictionary is printed to standard
output. Otherwise, an error message is printed.


